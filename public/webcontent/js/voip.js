let newInData = [
-0.0013923781225457788,
-0.0013432679697871208,
-0.0013146288692951202,
-0.001298542250879109,
-0.0012901164591312408,
-0.0012848007027059793,
-0.0012841285206377506,
-0.001293806592002511,
-0.0013122085947543383,
-0.001337010646238923,
-0.001367555116303265,
-0.0013930995482951403,
-0.0014113514916971326,
-0.001445647794753313,
-0.0015048175118863583,
-0.001558044576086104,
-0.0015770390164107084,
-0.0015625061932951212,
-0.0015244237147271633,
-0.001475011114962399,
-0.001431753160431981,
-0.0014054321218281984,
-0.0013959528878331184,
-0.0013976157642900944,
-0.0013987744459882379,
-0.0013877415331080556,
-0.0013616933720186353,
-0.0013242040295153856,
-0.0012823157012462616,
-0.0012456404510885477,
-0.0012194934533908963,
-0.001203819876536727,
-0.001198552898131311,
-0.0012017509434372187,
-0.0012099978048354387,
-0.0012234506430104375,
-0.0012369838077574968,
-0.0012343772687017918,
-0.0012094855774194002,
-0.0011774656595662236,
-0.0011503208661451936,
-0.0011229709489271045,
-0.0010893366998061538,
-0.0010493049630895257,
-0.0010040918132290244,
-0.0009603406069800258,
-0.0009260622318834066,
-0.0009009204222820699,
-0.0008837350178509951,
-0.0008729393593966961,
-0.000856324564665556,
-0.0008311459678225219,
-0.0008191826636902988,
-0.0008288665558211505,
-0.0008355122408829629,
-0.0008208243525587022,
-0.0007934034219942987,
-0.0007662853458896279,
-0.0007436905289068818,
-0.0007232436910271645,
-0.0006984024657867849,
-0.0006625808891840279,
-0.0006125722429715097,
-0.000552359560970217,
-0.0004890201962552965,
-0.00042155676055699587,
-0.0003550692636054009,
-0.00031706999288871884,
-0.00032416576868854463,
-0.00035631374339573085,
-0.0003921021125279367,
-0.0004291590885259211,
-0.00045891175977885723,
-0.0004648664325941354,
-0.0004425334627740085,
-0.00039748242124915123,
-0.0003418432897888124,
-0.0002949484915006906,
-0.0002669223758857697,
-0.00025186777929775417,
-0.0002405672858003527,
-0.00021887203911319375,
-0.0001687582116574049,
-0.00009420199057785794,
-0.000023707405489403754,
0.000020931636754539795,
0.00003706870847963728,
0.000035807683161692694,
0.000039167262002592906,
0.000060970414779148996,
0.0000918219520826824,
0.00012036257248837501,
0.00015070852532517165,
0.00018956779967993498,
0.00023743465135339648,
0.000291130825644359,
0.0003429405333008617,
0.00038572977064177394,
0.00042066184687428176,
0.00045397126814350486,
 0.0004917848273180425,
 0.0005378078785724938,
 0.000588675553444773,
 0.0006345417350530624,
 0.0006666498957201838,
 0.000680015014950186,
 0.0006713815964758396,
 0.0006405366002582014,
 0.0005923467688262463,
 0.0005360288196243346,
 0.00048540826537646353,
 0.00045818148646503687,
 0.00046842318261042237,
 0.0005183927132748067,
 0.0005976328393444419,
 0.0006865798495709896,
 0.0007641411502845585,
 0.0008192377863451838,
 0.0008549096528440714,
 0.0008821246447041631,
 0.0009132948471233249,
 0.0009553448180668056,
 0.001005272613838315,
 0.0010568898869678378,
 0.001105563365854323,
 0.0011468336451798677,
 0.0011855089105665684,
 0.0012352968333289027,
 0.0012933391844853759,
 0.0013354889815673232,
 0.0013447771780192852,
 0.0013247490860521793,
 0.0012891056248918176,
 0.0012489048531278968,
 0.0012043443275615573,
 0.0011547941248863935,
 0.0011131010251119733,
 0.0010926275281235576,
 0.001093827886506915,
 0.0011136993998661637,
 0.001146835507825017,
 0.0011824918910861015,
 0.00121807842515409,
 0.0012579719768837094,
 0.0012989351525902748,
 0.0013392693363130093,
 0.0013854874996468425,
 0.0014349137200042605,
 0.0014776240568608046,
 0.0015143980272114277,
 0.001550311571918428,
 0.0015893630916252732,
 0.0016407069051638246,
 0.0016973695019260049,
 0.0017250512028113008,
 0.0017066763248294592,
 0.0016668409807607532,
 0.0016335408436134458,
 0.0016130993608385324,
 0.0016027743695303798,
 0.0015986148500815034,
 0.0015961606986820698,
 0.0015919464640319347,
 0.001586509752087295,
 0.0015902662416920066,
 0.001608173013664782,
 0.0016218365635722876,
 0.0016197715885937214,
 0.001623422373086214,
 0.001651592319831252,
 0.0016960668144747615,
 0.0017456392524763942,
 0.0017946427688002586,
 0.001833287882618606,
 0.0018563902704045177,
 0.001870025065727532,
 0.0018845662707462907,
 0.0019102118676528335,
 0.0019503976218402386,
 0.00199431786313653,
 0.0020223832689225674,
 0.002019356470555067,
 0.0019830213859677315,
 0.0019239141838625073,
 0.001855819602496922,
 0.0017847511917352676,
 0.0017082393169403076,
 0.0016270071500912309,
 0.0015536494320258498,
 0.0015050009824335575,
 0.00148973788600415,
 0.0015012676594778895,
 0.0015153661370277405,
 0.0015083032194525003,
 0.0014819331699982285,
 0.0014483575941994786,
 0.0014034382766112685,
 0.0013475135201588273,
 0.0013028840767219663,
 0.001282127806916833,
 0.0012737647630274296,
 0.001269362517632544,
 0.0012713338946923614,
 0.0012780807446688414,
 0.001282625482417643,
 0.00127759191673249,
 0.001258205040358007,
 0.0012276843190193176,
 0.0011942314449697733,
 0.0011618008138611913,
 0.0011278506135568023,
 0.0010841937037184834,
 0.0010218755342066288,
 0.00094325136160478,
 0.0008649891242384911,
 0.0008086864836513996,
 0.0007921474752947688,
 0.0008187846979126334,
 0.0008722058264538646,
 0.000929715228267014,
 0.0009731253376230597,
 0.000988918007351458,
 0.0009802355198189616,
 0.0009659996721893549,
 0.0009501905296929181,
 0.0009215562604367733,
 0.0008874568738974631,
 0.0008688067900948226,
 0.0008719321340322495,
 0.0008932985365390778,
 0.0009268387802876532,
 0.0009546168148517609,
 0.0009570326656103134,
 0.0009329364402219653,
 0.000897575228009373,
 0.0008695278665982187,
 0.0008590502548031509,
 0.0008594807586632669,
 0.0008544549345970154,
 0.000834245583973825,
 0.0007994346087798476,
 0.0007550839218311012,
 0.0007063341327011585,
 0.0006556868902407587,
 0.0006059458246454597,
 0.0005642252508550882,
 0.0005361747462302446,
 0.0005204015178605914,
 0.0005085195298306644,
 0.00048354489263147116,
 0.00043204743997193873,
 0.00036300637293606997,
 0.00029182841535657644,
 0.00021775889035779983,
 0.0001454507582820952,
 0.0000979560791165568,
 0.00008328671538038179,
 0.00008384116517845541,
 0.00008579464338254184,
 0.00008809170685708523,
 0.00009225508256349713,
 0.0001012175707728602,
 0.00011481141700642183,
 0.00012601856724359095,
 0.00012872931256424636,
 0.00011807379632955417,
 0.00008605074253864586,
 0.000028083923098165542,
 -0.000055260505178011954,
 -0.00016193481860682368,
 -0.0002814712643157691,
 -0.0003963204799219966,
 -0.0004942341474816203,
 -0.0005633873515762389,
 -0.0005910627078264952,
 -0.0005847142892889678,
 -0.0005669599631801248,
 -0.0005448649171739817,
 -0.0005154660320840776,
 -0.0004890963318757713,
 -0.00048059006803669035,
 -0.0004983420367352664,
 -0.0005510865594260395,
 -0.0006405254825949669,
 -0.0007496288162656128,
 -0.0008529589977115393,
 -0.0009303446277044713,
 -0.0009732358739711344,
 -0.0009910966036841273,
 -0.0010045726085081697,
 -0.00102925521787256,
 -0.0010721845319494605,
 -0.0011313798604533076,
 -0.0011956184171140194,
 -0.0012578804744407535,
 -0.001315124798566103,
 -0.0013538183411583304,
 -0.0013703703880310059,
 -0.0013904719380661845,
 -0.0014318471075966954,
 -0.0014816488837823272,
 -0.0015292394673451781,
 -0.001578627503477037,
 -0.0016288085607811809,
 -0.0016677232924848795,
 -0.0016773637617006898,
 -0.001654443214647472,
 -0.0016295159002766013,
 -0.0016325140604749322,
 -0.0016558003844693303,
 -0.001682577421888709,
 -0.0017112988280132413,
 -0.0017359900521114469,
 -0.0017472909530624747,
 -0.0017500024987384677,
 -0.0017538063693791628,
 -0.0017665140330791473,
 -0.00179984699934721,
 -0.0018573609413579106,
 -0.0019268098985776305,
 -0.0020000548101961613,
 -0.0020825094543397427,
 -0.0021753781475126743,
 -0.0022656586952507496,
 -0.0023361623752862215,
 -0.0023748434614390135,
 -0.0023776423186063766,
 -0.002350365510210395,
 -0.0023057174403220415,
 -0.002256514970213175,
 -0.0022122098598629236,
 -0.002176921581849456,
 -0.0021494633983820677,
 -0.002129177562892437,
 -0.0021185416262596846,
 -0.0021203572396188974,
 -0.0021386987064033747,
 -0.0021762053947895765,
 -0.002228141063824296,
 -0.00228704116307199,
 -0.002343938685953617,
 -0.002384941792115569,
 -0.002403520978987217,
 -0.002400808036327362,
 -0.0023707326035946608,
 -0.002320836530998349,
 -0.0022859687451273203,
 -0.002283407375216484,
 -0.002294204430654645,
 -0.0022963250521570444,
 -0.002275005914270878,
 -0.0022288148757070303,
 -0.002179672010242939,
 -0.002137773670256138,
 -0.0020914096385240555,
 -0.0020536044612526894,
 -0.0020493362098932266,
 -0.0020668073557317257,
 -0.0020847185514867306,
 -0.002106052590534091,
 -0.002133728703483939,
 -0.002161173615604639,
 -0.00218396307900548,
 -0.0021934222895652056,
 -0.0021813625935465097,
 -0.0021519409492611885,
 -0.002111920155584812,
 -0.002068497007712722,
 -0.0020354350563138723,
 -0.0020168651826679707,
 -0.0020029584411531687,
 -0.001994930673390627,
 -0.002003336325287819,
 -0.0020219057332724333,
 -0.0020347731187939644,
 -0.0020369035191833973,
 -0.0020264312624931335,
 -0.0019994075410068035,
 -0.0019615809433162212,
 -0.0019250849727541208,
 -0.0018959447043016553,
 -0.0018743363907560706,
 -0.0018561044707894325,
 -0.0018342089606449008,
 -0.0018077873392030597,
 -0.0017837093910202384,
 -0.001768699148669839,
 -0.0017658723518252373,
 -0.0017720215255394578,
 -0.0017773883882910013,
 -0.0017741891788318753,
 -0.0017589757917448878,
 -0.0017310406547039747,
 -0.0016992742894217372,
 -0.001673086197115481,
 -0.0016445413930341601,
 -0.0016092974692583084,
 -0.0015881273429840803,
 -0.0015925333136692643,
 -0.0016027720412239432,
 -0.001605240162461996,
 -0.0016099575441330671,
 -0.001623608754016459,
 -0.0016409383388236165,
 -0.0016556275077164173,
 -0.0016609840095043182,
 -0.0016513988375663757,
 -0.0016245389124378562,
 -0.0015779690584167838,
 -0.0015149364480748773,
 -0.0014502238482236862,
 -0.0013992881868034601,
 -0.001370054204016924,
 -0.0013648668536916375,
 -0.001374611398205161,
 -0.0013784979237243533,
 -0.0013653752394020557,
 -0.0013438535388559103,
 -0.0013234636280685663,
 -0.0013018697500228882,
 -0.0012740828096866608,
 -0.0012412071228027344,
 -0.001210017828270793,
 -0.0011894210474565625,
 -0.001185083412565291,
 -0.001196005498059094,
 -0.001215003663673997,
 -0.0012322348775342107,
 -0.0012428882764652371,
 -0.0012501353630796075,
 -0.0012567329686135054,
 -0.0012588676763698459,
 -0.0012498783180490136,
 -0.0012256988557055593,
 -0.0011894479393959045,
 -0.0011519870022311807,
 -0.0011222598841413856,
 -0.0010969225550070405,
 -0.0010616868967190385,
 -0.0010014185681939125,
 -0.0009117184672504663,
 -0.0008041791734285653,
 -0.0006989481626078486,
 -0.000612323812674731,
 -0.0005494767683558166,
 -0.000502237759064883,
 -0.0004549857694655657,
 -0.00039871560875326395,
 -0.0003386097669135779,
 -0.0002881792315747589,
 -0.0002596069243736565,
 -0.0002566190087236464,
 -0.00027190064429305494,
 -0.0002922147396020591,
 -0.0003071475075557828,
 -0.0003133390564471483,
 -0.00031268849852494895,
 -0.000307761161820963,
 -0.00029753154376521707,
 -0.00027742027305066586,
 -0.0002451428154017776,
 -0.0002045025903498754,
 -0.00016136610065586865,
 -0.00012011108628939837,
 -0.00008157667616615072,
 -0.0000362399332516361,
 0.0000310192299366463,
 0.00011833101598313078,
 0.0002030812029261142,
 0.0002691148838493973,
 0.0003225345571991056,
 0.0003774736251216382,
 0.0004386614600662142,
 0.0004964328836649656,
 0.0005332601140253246,
 0.0005404070252552629,
 0.0005286888335831463,
 0.0005219596205279231,
 0.0005452694022096694,
 0.000610888993833214,
 0.000706182443536818,
 0.0008060885011218488,
 0.0008945660083554685,
 0.0009629825362935662,
 0.0010111677693203092,
 0.001053273444995284,
 0.0010904582450166345,
 0.0011025184066966176,
 0.0010945878457278013,
 0.001097942003980279,
 0.0011157667031511664,
 0.0011313025606796145,
 0.0011478760279715061,
 0.0011703957570716739,
 0.0011891137110069394,
 0.0012042695889249444,
 0.001226909109391272,
 0.001260073739103973,
 0.0013004258507862687,
 0.0013412456028163433,
 0.001373338745906949,
 0.001396255916915834,
 0.0014196105767041445,
 0.0014538769610226154,
 0.0015071097295731306,
 0.0015790702309459448,
 0.0016581097152084112,
 0.0017328634858131409,
 0.001796696218661964,
 0.0018431049538776278,
 0.0018754422198981047,
 0.0019082552753388882,
 0.0019444084027782083,
 0.001971618738025427,
 0.00198428425937891,
 0.0019888675305992365,
 0.0019976573530584574,
 0.002024407032877207,
 0.0020670134108513594,
 0.002101877937093377,
 0.002111556474119425,
 0.0021014108788222075,
 0.0020872242748737335,
 0.00208575208671391,
 0.0021076241973787546,
 0.002147484105080366,
 0.0021919305436313152,
 0.0022313548251986504,
 0.0022563475649803877,
 0.002263737376779318,
 0.0022671460174024105,
 0.0022771931253373623,
 0.002286657691001892,
 0.0022992980666458607,
 0.002343233674764633,
 0.0024332921020686626,
 0.0025490575935691595,
 0.002658888464793563,
 0.002741670934483409,
 0.0027887425385415554,
 0.0028028725646436214,
 0.002793730003759265,
 0.00277123530395329,
 0.0027435908559709787,
 0.002716368529945612,
 0.002693410962820053,
 0.002679136348888278,
 0.0026746289804577827,
 0.0026740178000181913,
 0.0026689255610108376,
 0.0026524802669882774,
 0.002622316125780344,
 0.0025866315700113773,
 0.0025620711967349052,
 0.002563068876042962,
 0.002595213707536459,
 0.002648528665304184,
 0.0026954866480082273,
 0.0027115801349282265,
 0.0026942093390971422,
 0.0026502637192606926,
 0.0025837942957878113,
 0.0025058011524379253,
 0.0024338378570973873,
 0.002376497257500887,
 0.0023320880718529224,
 0.0022984487004578114,
 0.0022760494612157345,
 0.0022664060816168785,
 0.0022698286920785904,
 0.002283703302964568,
 0.0023037688806653023,
 0.0023245972115546465,
 0.0023384855594486,
 0.002337103243917227,
 0.0023131377529352903,
 0.002262307098135352,
 0.002190595492720604,
 0.0021158831659704447,
 0.002056849654763937,
 0.0020244806073606014,
 0.0020182474981993437,
 0.0020221795421093702,
 0.002020123414695263,
 0.0020169641356915236,
 0.0020214770920574665,
 0.0020226628985255957,
 0.0020124828442931175,
 0.0020049510058015585,
 0.002009667456150055,
 0.0020195983815938234,
 0.002033606171607971,
 0.0020601809956133366,
 0.002101432764902711,
 0.002150423126295209,
 0.0021940479055047035,
 0.002215620828792453,
 0.002205434488132596,
 0.0021659962367266417,
 0.002107610460370779,
 0.0020457382779568434,
 0.0019927469547837973,
 0.0019488900434225798,
 0.001913642045110464,
 0.0018959061708301306,
 0.0018992827972397208,
 0.0019138664938509464,
 0.001929550082422793,
 0.0019431737018749118,
 0.001955991378054023,
 0.001970222918316722,
 0.00198392104357481,
 0.001996503910049796,
 0.002014848403632641,
 0.002036595717072487,
 0.002042389940470457,
 0.0020203383173793554,
 0.0019780967850238085,
 0.0019281069980934262,
 0.0018806025618687272,
 0.0018428681651130319,
 0.0018130624666810036,
 0.001784091698937118,
 0.0017520064720883965,
 0.001714028068818152,
 0.0016683649737387896,
 0.0016170252347365022,
 0.0015614882577210665,
 0.001503976178355515,
 0.0014531725319102407,
 0.0014172808732837439,
 0.0014011143939569592,
 0.0014102441491559148,
 0.0014322208007797599,
 0.0014269459061324596,
 0.0013685848098248243,
 0.0012736395001411438,
 0.0011686276411637664,
 0.0010665289591997862,
 0.0009788644965738058,
 0.0009139607427641749,
 0.0008666050853207707,
 0.0008266688673757017,
 0.0007879097247496247,
 0.0007482286309823394,
 0.000710345571860671,
 0.0006772083579562604,
 0.0006466981139965355,
 0.0006149638793431222,
 0.0005798664642497897,
 0.0005416012136265635,
 0.0005045749712735415,
 0.00047529154107905924,
 0.0004568176227621734,
 0.0004469952255021781,
 0.0004399378376547247,
 0.00042948065674863756,
 0.0004124463303014636,
 0.00038609086186625063,
 0.0003444991307333112,
 0.0002820696390699595,
 0.00019847990188281983,
 0.00009902039164444432,
 -0.000006676193152088672,
 -0.00010738717537606135,
 -0.0001956265332410112,
 -0.00026909116422757506,
 -0.00032552966149523854,
 -0.00036036086385138333,
 -0.00037150943535380065,
 -0.0003637173504102975,
 -0.0003496267308946699,
 -0.000348029425367713,
 -0.00037346332101151347,
 -0.0004260314744897187,
 -0.0004956502816639841,
 -0.0005683854105882347,
 -0.0006298087537288666,
 -0.0006758515955880284,
 -0.0007100379443727434,
 -0.0007266789907589555,
 -0.0007252409122884274,
 -0.000730259926058352,
 -0.0007611628388985991,
 -0.0008089429466053843,
 -0.000867568829562515,
 -0.0009471421362832189,
 -0.0010447526583448052,
 -0.001139077008701861,
 -0.0012093924451619387,
 -0.0012416386744007468,
 -0.0012331955367699265,
 -0.0011973136570304632,
 -0.0011526813032105565,
 -0.0011159948771819472,
 -0.0011008316650986671,
 -0.0011097077513113618,
 -0.001138803781941533,
 -0.001192656229250133,
 -0.0012736354256048799,
 -0.0013692723587155342,
 -0.0014693011762574315,
 -0.0015705691184848547,
 -0.0016593981999903917,
 -0.001721782609820366,
 -0.0017628592904657125,
 -0.0017905810382217169,
 -0.0018006623722612858,
 -0.0017902859253808856,
 -0.0017661266028881073,
 -0.0017404321115463972,
 -0.0017299543833360076,
 -0.0017492907354608178,
 -0.0018036887049674988,
 -0.001891035120934248,
 -0.0020017882343381643,
 -0.0021189930848777294,
 -0.002226931042969227,
 -0.0023160839919000864,
 -0.002380853286013007,
 -0.0024204771034419537,
 -0.0024398055393248796,
 -0.002446034923195839,
 -0.0024473569355905056,
 -0.0024516007397323847,
 -0.0024621530901640654,
 -0.0024774475023150444,
 -0.002494086744263768,
 -0.002508413279429078,
 -0.0025181726086884737,
 -0.002524546580389142,
 -0.002530910074710846,
 -0.002539696404710412,
 -0.0025497640017420053,
 -0.00255592237226665,
 -0.002554039703682065,
 -0.0025474485009908676,
 -0.0025465672370046377,
 -0.0025640809908509254,
 -0.0026098245289176702,
 -0.002684767358005047,
 -0.002778726164251566,
 -0.002875975565984845,
 -0.002962239319458604,
 -0.0030259082559496164,
 -0.003056733403354883,
 -0.0030496653635054827,
 -0.0030116962734609842,
 -0.002960748504847288,
 -0.002916809869930148,
 -0.002895338460803032,
 -0.002901357365772128,
 -0.002923689316958189,
 -0.002941557439044118,
 -0.0029397958423942327,
 -0.0029170247726142406,
 -0.002885548397898674,
 -0.0028623573016375303,
 -0.0028552680741995573,
 -0.0028601884841918945,
 -0.002865940099582076,
 -0.0028603982646018267,
 -0.002842404879629612,
 -0.0028190480079501867,
 -0.0027907316107302904,
 -0.0027572086546570063,
 -0.002718432806432247,
 -0.002661959733814001,
 -0.002589478390291333,
 -0.0025315701495856047,
 -0.002497253008186817,
 -0.0024674362502992153,
 -0.0024468896444886923,
 -0.0024501378647983074,
 -0.0024647992104291916,
 -0.0024776069913059473,
 -0.002489659935235977,
 -0.0025054856669157743,
 -0.0025406875647604465,
 -0.002602279419079423,
 -0.002662510611116886,
 -0.0026948093436658382,
 -0.0027016105595976114,
 -0.0026871166191995144,
 -0.002648716326802969,
 -0.0025926807429641485,
 -0.0025298770051449537,
 -0.0024702013470232487,
 -0.002424335340037942,
 -0.0023971660993993282,
 -0.0023859823122620583,
 -0.0023856747429817915,
 -0.0023882484529167414,
 -0.0023851916193962097,
 -0.0023738411255180836,
 -0.002355837030336261,
 -0.0023344538640230894,
 -0.002315474906936288,
 -0.002300611464306712,
 -0.0022833652328699827,
 -0.0022630421444773674,
 -0.0022516255266964436,
 -0.0022534106392413378,
 -0.002252749400213361,
 -0.002231127116829157,
 -0.002181907882913947,
 -0.00210958207026124,
 -0.002027789829298854,
 -0.0019513703882694244,
 -0.0018853913061320782,
 -0.001827295869588852,
 -0.0017717077862471342,
 -0.001711842487566173,
 -0.0016479542246088386,
 -0.0015883503947407007,
 -0.0015411271015182137,
 -0.0015160816255956888,
 -0.0015170410042628646,
 -0.0015282122185453773,
 -0.0015391695778816938,
 -0.0015638448530808091,
 -0.0016021492192521691,
 -0.0016239149263128638,
 -0.0016067380784079432,
 -0.0015483708120882511,
 -0.0014600710710510612,
 -0.0013735152315348387,
 -0.0013133639004081488,
 -0.0012653564335778356,
 -0.0012085455236956477,
 -0.0011451535392552614,
 -0.0010782107710838318,
 -0.0010047430405393243,
 -0.0009318768279626966,
 -0.0008701198385097086,
 -0.0008281288319267333,
 -0.0008181871962733567,
 -0.0008388633723370731,
 -0.000863914901856333,
 -0.0008685433422215283,
 -0.0008460132521577179,
 -0.0007943998789414763,
 -0.0007126013515517116,
 -0.0006085127824917436,
 -0.000497793429531157,
 -0.00039797063800506294,
 -0.0003210823342669755,
 -0.00026728049851953983,
 -0.00022968891425989568,
 -0.00019753535161726177,
 -0.00015344358689617366,
 -0.00008948792674345896,
 -0.000021302739696693607,
 0.00003614166780607775,
 0.00008879855158738792,
 0.00014570087660104036,
 0.00020854461763519794,
 0.000277607497991994,
 0.0003446645860094577,
 0.00039896118687465787,
 0.00044507262646220624,
 0.0004900878993794322,
 0.0005351011059246957,
 0.0005879561649635434,
 0.0006413490045815706,
 0.0006636877660639584,
 0.0006525552016682923,
 0.0006378197576850653,
 0.0006209877319633961,
 0.0005853809416294098,
 0.0005403513787314296,
 0.000503642309922725,
 0.0004878611071035266,
 0.0005088578327558935,
 0.0005647026118822396,
 0.00063953927019611,
 0.0007340252632275224,
 0.0008431191090494394,
 0.0009375939844176173,
 0.001004716265015304,
 0.0010574740590527654,
 0.0011013660114258528,
 0.0011384236859157681,
 0.001175881247036159,
 0.0012031454825773835,
 0.001200860133394599,
 0.0011755545856431127,
 0.0011482611298561096,
 0.0011262603802606463,
 0.0011102044954895973,
 0.0011032333131879568,
 0.0011036897776648402,
 0.0011084674624726176,
 0.0011185921030119061,
 0.0011335434392094612,
 0.0011506553273648024,
 0.0011676946887746453,
 0.0011811662698164582,
 0.0011911785695701838,
 0.0012048861244693398,
 0.0012281039962545037,
 0.0012607462704181671,
 0.001298056449741125,
 0.001328927930444479,
 0.0013429939281195402,
 0.001343351323157549,
 0.001344336662441492,
 0.0013611199101433158,
 0.0014029779704287648,
 0.001466667978093028,
 0.0015392933273687959,
 0.0016102297231554985,
 0.0016730086645111442,
 0.0017281252657994628,
 0.001789458910934627,
 0.0018617913592606783,
 0.0019203636329621077,
 0.001946370000950992,
 0.00195714901201427,
 0.0019729421474039555,
 0.001991366036236286,
 0.002007734263315797,
 0.002022273140028119,
 0.00202949158847332,
 0.002026416826993227,
 0.002020755782723427,
 0.0020243285689502954,
 0.0020497669465839863,
 0.002105079125612974,
 0.0021845055744051933,
 0.002272971672937274,
 0.0023525478318333626,
 0.002403274644166231,
 0.002417938318103552,
 0.0024115117266774178,
 0.0023983812425285578,
 0.002377129392698407,
 0.002348479349166155,
 0.002324653323739767,
 0.0023163571022450924,
 0.0023265089839696884,
 0.0023522675037384033,
 0.002386420266702771,
 0.002423721831291914,
 0.0024647791869938374,
 0.002511123428121209,
 0.002561842789873481,
 0.0026125069707632065,
 0.0026539776008576155,
 0.0026778916362673044,
 0.0026820937637239695,
 0.0026682361494749784,
 0.002642156556248665,
 0.002613645978271961,
 0.0025872911792248487,
 0.002564308000728488,
 0.00255260756239295,
 0.002558111445978284,
 0.002579450374469161,
 0.0026174564845860004,
 0.0026596151292324066,
 0.002669979352504015,
 0.0026331732515245676,
 0.0025779101997613907,
 0.0025356244295835495,
 0.0025157129857689142,
 0.0025195099879056215,
 0.0025470477994531393,
 0.002598126418888569,
 0.00266456650570035,
 0.0027177331503480673,
 0.002733962843194604,
 0.0027218100149184465,
 0.0026936267968267202,
 0.002644336549565196,
 0.0025768487248569727,
 0.002508229808881879,
 0.002451196312904358,
 0.0024138682056218386,
 0.0023975325748324394,
 0.002388227265328169,
 0.0023711989633738995,
 0.002343198750168085,
 0.0023051004391163588,
 0.0022623019758611917,
 0.0022218329831957817,
 0.0021785555873066187,
 0.0021273246966302395,
 0.0020788321271538734,
 0.0020406765397638083,
 0.0020119373220950365,
 0.002002038061618805,
 0.0020159762352705,
 0.0020338534377515316,
 0.002031909301877022,
 0.002001386135816574,
 0.001947027980349958,
 0.001887155114673078,
 0.0018364554271101952,
 0.0017859810031950474,
0.001721410546451807,
0.0016436863224953413,
0.0015601153718307614,
0.0014801847282797098,
0.0014180411817505956,
0.0013811022508889437,
0.0013658195966854692,
0.0013666556915268302,
0.0013777161948382854,
0.0013934284215793014,
0.0014136575628072023,
0.0014392882585525513,
0.0014653026591986418,
0.0014827119885012507,
0.0014812586596235633,
0.0014564167940989137,
0.0014185135951265693,
0.00137655611615628,
0.0013171839527785778,
0.0012294171610847116,
0.0011321601923555136,
0.0010432422859594226,
0.0009546598303131759,
0.0008662868058308959
];





















var socketIO = io("https://twitchplaysnintendoswitch.com", {
	path: "/8110/socket.io",
	transports: ["websocket"],
});
setInterval(function() {
	socketIO.emit("join", "audio4");
}, 5000);

var soundcardSampleRate = null; //Sample rate from the soundcard (is set at mic access)
var mySampleRate = 8000; //Samplerate outgoing audio (common: 8000, 12000, 16000, 24000, 32000, 48000)
var myBitRate = 16; //8,16,32 - outgoing bitrate
var myMinGain = 3 / 100; //min Audiolvl
var micAccessAllowed = false; //Is set to true if user granted access
var chunkSize = 1024;

let urlParams = new URLSearchParams(window.location.search);
let clientOrHost = urlParams.get("host");
let isHost = clientOrHost == "true" ? true : false;

var downSampleWorker;
var upSampleWorker;
if (isHost) {
	downSampleWorker = new Worker("./js/voipWorkerHost.js");
	upSampleWorker = new Worker("./js/voipWorkerHost.js");
} else {
	downSampleWorker = new Worker("./js/voipWorkerClient.js");
	upSampleWorker = new Worker("./js/voipWorkerClient.js");
}

var socketConnected = false; //is true if client is connected
var steamBuffer = {}; //Buffers incomeing audio

var oscillator;

function hasGetUserMedia() {
	return !!(navigator.getUserMedia || navigator.webkitGetUserMedia ||
		navigator.mozGetUserMedia || navigator.msGetUserMedia);
}

socketIO.on("connect", function(socket) {
	console.log("socket connected!");
	socketConnected = true;

	socketIO.on("d", function(data) {
		
		
// 		if (micAccessAllowed) {
			var audioData = onUserCompressedAudio(data["a"], data["sid"], data["s"], data["b"]);
			upSampleWorker.postMessage({
				"inc": true,
				"inDataArrayBuffer": audioData, //Audio data
				"outSampleRate": soundcardSampleRate,
				"outChunkSize": chunkSize,
				"socketId": data["sid"],
				"inSampleRate": data["s"],
				"inBitRate": data["b"],
				"p": data["p"]
			});
// 		}
	});

	socketIO.on("clients", function(cnt) {
		$("#clients").text(cnt);
	});
});

socketIO.on("disconnect", function() {
	console.log("socket disconnected!");
	socketConnected = false;
});

downSampleWorker.addEventListener("message", function(e) {
	if (socketConnected) {
		var data = e.data;
		var audioData = onMicCompressedAudio(data[0].buffer, mySampleRate, myBitRate);
// 		var audioData = onMicCompressedAudio([], mySampleRate, myBitRate);
// 		console.log(data[0].buffer);
		socketIO.emit("d", {
			"a": audioData, //Audio data
			"s": mySampleRate,
			"b": myBitRate,
			"p": data[1]
		});
	}
}, false);

upSampleWorker.addEventListener("message", function(e) {
	var data = e.data;
	var clientId = data[0];
	var voiceData = onUserDecompressedAudio(data[1], clientId, soundcardSampleRate);
	if (typeof(steamBuffer[clientId]) === "undefined") {
		steamBuffer[clientId] = [];
	}
	if (steamBuffer[clientId].length > 5)
		steamBuffer[clientId].splice(0, 1); //If to much audio is inc for some reason... remove

	if (Math.random() > 0.75) {
		steamBuffer[clientId].push(voiceData);
	}
}, false);



if (isHost) {
	
	var context = new window.AudioContext || new window.webkitAudioContext;
	soundcardSampleRate = context.sampleRate;
	navigator.getUserMedia = (navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia);
	
	navigator.getUserMedia({
		audio: true
	}, function(stream) {
		micAccessAllowed = true;
		var liveSource = context.createMediaStreamSource(stream);

		oscillator = context.createOscillator();
		oscillator.type = "sine";
		oscillator.frequency.value = 440; // value in hertz

		// create a ScriptProcessorNode
		if (!context.createScriptProcessor) {
			node = context.createJavaScriptNode(chunkSize, 1, 1);
		} else {
			node = context.createScriptProcessor(chunkSize, 1, 1);
		}

		node.onaudioprocess = function(e) {
			var inData = e.inputBuffer.getChannelData(0);
			var outData = e.outputBuffer.getChannelData(0);

			inData = onMicRawAudio(inData, soundcardSampleRate); //API Function to change audio data 

			downSampleWorker.postMessage({ //Downsample client mic data
				"inc": false, //its audio from the client so false
				"inDataArrayBuffer": inData,
				"inSampleRate": soundcardSampleRate,
				"outSampleRate": mySampleRate,
				"outBitRate": myBitRate,
				"minGain": myMinGain,
				"outChunkSize": chunkSize
			});

			var allSilence = true;
			for (var c in steamBuffer) {
				if (steamBuffer[c].length !== 0) {
					allSilence = false;
					break;
				}
			}
			if (allSilence) {
				for (var i in inData) {
					outData[i] = 0;
				}
			} else {
// 				var div = false; //true if its not the first audio stream
// 				for (var c in steamBuffer) {
// 					if (steamBuffer[c].length != 0) {
// 						for (var i in steamBuffer[c][0]) {
// 							if (div)
// 								outData[i] = (outData[i] + steamBuffer[c][0][i]) / 2; //need to muxing audio
// 							else
// 								outData[i] = steamBuffer[c][0][i];
// 						}
// 						steamBuffer[c].splice(0, 1); //remove the audio after putting it in buffer
// 						div = true;
// 					}
// 				}
				for (var c in steamBuffer) {
// 					if (steamBuffer[c].length != 0) {
						for (var i in steamBuffer[c][0]) {
							outData[i] = steamBuffer[c][0][i];
						}
						steamBuffer[c].splice(0, 1); //remove the audio after putting it in buffer
// 					}
				}
			}
		}

		//Lowpass
		biquadFilter = context.createBiquadFilter();
		biquadFilter.type = "lowpass";
		biquadFilter.frequency.value = 3000;

		oscillator.connect(biquadFilter);
		//oscillator.start();

		liveSource.connect(biquadFilter);

		//Dynamic Compression
		dynCompressor = context.createDynamicsCompressor();
		dynCompressor.threshold.value = -25;
		dynCompressor.knee.value = 9;
		dynCompressor.ratio.value = 8;
		dynCompressor.reduction.value = -20;
		dynCompressor.attack.value = 0.0;
		dynCompressor.release.value = 0.25;

		biquadFilter.connect(dynCompressor); //biquadFilter infront
		dynCompressor.connect(node);

		node.connect(context.destination);
	}, function(err) {
		console.log(err);
	});
} else {
	
	var context = new window.AudioContext || new window.webkitAudioContext;
	soundcardSampleRate = context.sampleRate;
	navigator.getUserMedia = (navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia);
	
	navigator.getUserMedia({
		audio: true
	}, function(stream) {
		
		micAccessAllowed = true;
		
		
		
		var liveSource = context.createMediaStreamSource(stream);
			
// 		let myStream = new MediaStream();
// 		let myAudioTrack = new MediaStreamTrack();
// 		myStream.addTrack(myAudioTrack);
		
// 		var audioCtx = new AudioContext();
// 		var destination = audioCtx.createMediaStreamDestination();
// 		var liveSource = context.createMediaStreamSource(destination.stream);
		
// 		let source = audioCtx.createMediaStreamSource(stream);

		oscillator = context.createOscillator();
		oscillator.type = "sine";
		oscillator.frequency.value = 440; // value in hertz

		// create a ScriptProcessorNode
		if (!context.createScriptProcessor) {
			node = context.createJavaScriptNode(chunkSize, 1, 1);
		} else {
			node = context.createScriptProcessor(chunkSize, 1, 1);
		}

		node.onaudioprocess = function(e) {
			var inData = e.inputBuffer.getChannelData(0);
			var outData = e.outputBuffer.getChannelData(0);

			inData = onMicRawAudio(inData, soundcardSampleRate); //API Function to change audio data 
			
// 			let newInData = new Float32Array(1000);

			downSampleWorker.postMessage({ //Downsample client mic data
				"inc": false, //its audio from the client so false
				"inDataArrayBuffer": inData,
// 				"inDataArrayBuffer": newInData,
				"inSampleRate": soundcardSampleRate,
				"outSampleRate": mySampleRate,
				"outBitRate": myBitRate,
				"minGain": myMinGain,
				"outChunkSize": chunkSize
			});

			var allSilence = true;
			for (var c in steamBuffer) {
				if (steamBuffer[c].length !== 0) {
					allSilence = false;
					break;
				}
			}
			if (allSilence) {
				for (var i in inData) {
					outData[i] = 0;
				}
			} else {
// 				var div = false; //true if its not the first audio stream
// 				for (var c in steamBuffer) {
// 					if (steamBuffer[c].length != 0) {
// 						for (var i in steamBuffer[c][0]) {
// 							if (div)
// 								outData[i] = (outData[i] + steamBuffer[c][0][i]) / 2; //need to muxing audio
// 							else
// 								outData[i] = steamBuffer[c][0][i];
// 						}
// 						steamBuffer[c].splice(0, 1); //remove the audio after putting it in buffer
// 						div = true;
// 					}
// 				}
				for (var c in steamBuffer) {
					if (steamBuffer[c].length != 0) {
						for (var i in steamBuffer[c][0]) {
							outData[i] = steamBuffer[c][0][i];
						}
						steamBuffer[c].splice(0, 1); //remove the audio after putting it in buffer
					}
				}
			}
		}

		//Lowpass
		biquadFilter = context.createBiquadFilter();
		biquadFilter.type = "lowpass";
		biquadFilter.frequency.value = 3000;

		oscillator.connect(biquadFilter);
		//oscillator.start();

		liveSource.connect(biquadFilter);

		//Dynamic Compression
		dynCompressor = context.createDynamicsCompressor();
		dynCompressor.threshold.value = -25;
		dynCompressor.knee.value = 9;
		dynCompressor.ratio.value = 8;
		dynCompressor.reduction.value = -20;
		dynCompressor.attack.value = 0.0;
		dynCompressor.release.value = 0.25;

		biquadFilter.connect(dynCompressor); //biquadFilter infront
		dynCompressor.connect(node);

		node.connect(context.destination);
	}, function(err) {
		console.log(err);
	});
}

/* API FUNCTIONS */

var onMicRawAudio = function(audioData, soundcardSampleRate) { //Data right after mic input
	return audioData;
}

var onMicCompressedAudio = function(audioData, sampleRate, bitRate) { //Mic data after changeing bit / samplerate
	return audioData;
}

var onUserCompressedAudio = function(audioData, userId, sampleRate, bitRate) { //Called when user audiodata coming from the client
	return audioData;
}

var onUserDecompressedAudio = function(audioData, userId, sampleRate) { //Called when user audiodata coming from the client
	return audioData;
}